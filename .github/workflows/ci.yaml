name: ci
on: pull_request

jobs:
  notebook_format:
    name: notebook format
    runs-on: ubuntu-latest
    steps:
    - uses: actions/setup-python@v1
    - uses: actions/checkout@v2
    - name: Fetch master branch
      run: git fetch -u origin master:master
    - name: Install tensorflow-docs
      run: python3 -m pip install -U git+https://github.com/tensorflow/docs
    - name: Check notebook formatting
      run: .github/workflows/nbformat/run_nbformat.sh

  notebook_lint:
    name: notebook lint
    runs-on: ubuntu-latest
    steps:
    - uses: actions/setup-python@v1
    - uses: actions/checkout@v2
    - name: Fetch master branch
      run: git fetch -u origin master:master
    - name: Install requirements
      run: python3 -m pip install -U -r .github/workflows/linter/requirements.txt
    - name: Lint check code blocks
      run: .github/workflows/linter/run_linter.sh
